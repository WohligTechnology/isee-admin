<div ng-include="template.header" class="template header"></div>
<div class="panel panel-default">
	<div class="form-default">
		<!--tabs for Excel Upload-->
		<div class="custom-tabs">
			<!--tabs for  Button Nav Excel Upload-->
			<div class="tab">
				<ul class="nav nav-tabs">
					<li class="btn btn-default btn-primary" ng-class="" ng-repeat="tab in tabs track by $index" ng-click="activeTabs($index)">{{tab.title}}</li>
				</ul>
			</div>
			<!--End tabs for  Button Nav Excel Upload-->
			<!--tabs Start-->
			<uib-tabset active="activeJustified">
				<uib-tab ng-repeat="tab in tabs" index="$index + 1" disable="tab.disabled">
					<!--tabs title-->
					<div class="mb-20">
						<span class="main bredcrums">{{tab.title}}</span>
					</div>
					<!--end tabs title-->
					<!--upload button-->
					<div class="upload-button">
						<div class="row">
							<div class="col-sm-4 col-sm-offset-1">
								<div class="upload-data">
									<upload-image ng-model=formdata.file></upload-image>
								</div>
							</div>
							<div class="col-sm-6">
								<div class="text-right">
									<button type="submit" class="btn btn-success" ng-click="getExcelFields(formdata)">Upload 
										<i class="fa fa-upload" aria-hidden="true"></i></button>
								</div>
							</div>
						</div>
					</div>
					<!--upload button end-->
					<!--Excel Upload Fields-->
					<div class="custom-scroll">
						<div class="form-group" ng-repeat="formname in excelData.fields">
							<div class="row">
								<div class="col-sm-4 col-sm-offset-1 ">
									<!-- {{formname}} -->
									<label class=" control-label">{{formname.field}} 
										<i class="fa fa-info-circle" tooltip-placement="{{formname.description}}" uib-tooltip="{{formname.description}}"></i>
									</label>
								</div>
								<div class="col-sm-6">
									<ui-select ng-model="formData[formname.field]" name="country" theme="bootstrap" sortable="true">
										<ui-select-match placeholder="Select">
											<span>{{$select.selected}}</span>
										</ui-select-match>
										<ui-select-choices repeat="country in excelData.excelFields | filter: $select.search" refresh="" refresh-delay="0">
											{{country}}
										</ui-select-choices>
									</ui-select>
								</div>
							</div>
						</div>
					</div>
					<!--End Excel Upload Fields-->
					<div class="text-center mt-10 mb-20">
						<button type="submit" class="btn btn-info" ng-click="mapExcelFields(formData,formdata)" promise-btn>Submit</button>
					</div>

					<div class="text-right mt-10 mb-20">
						<button type="submit" class="btn btn-success" ng-click="getHistory()">History</button>
					</div>

					<!--Logs Tabel History-->
					<div class="logs-tabel">
						<div class="mb-10">
							<span class="main bredcrums">Upload History</span>
						</div>
						<uib-accordion>
							<div class="dataTables_wrapper">
								<table class="table table-bordered">
									<tr ng-click="status.open = !status.open">
										<th>Date</th>
										<th>Sucess</th>
										<th>Failer</th>
										<th>Total Upload</th>
									</tr>
									<tr ng-click="status.open = !status.open">
										<th>{{dateOfLogs | date:'MM/dd/yyyy'}}</th>
										<th><span class="success"> {{sucessCount}} <i class="fa fa-check-circle"></i></span></th>
										<th><span class="danger"> {{errorCount}} <i class="fa fa-times-circle"></i></span></th>
										<th>{{totalCount}}</th>
									</tr>
									<tr class="inside-status" ng-repeat="data in logData track by $index">
										<td colspan="4" uib-accordion-group class="panel-default" is-open="status.open" >
											<div>
												<table class="table table-bordered">
													<thead>
														<tr>
															<th width="100">Row #</th>
															<th>Status</th>
															<th width="200">Total Entries: 4</th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td>
																<span class="danger"><i class="fa fa-times-circle"></i> Row 2</span>
															</td>
															<td colspan="2">
																<span>
                                						<span>Entry failed!</span>
																<pre class="danger-pre"><code>{{data}}</code></pre>
																</span>
															</td>
														</tr>
													</tbody>
												</table>
											</div>
										</td>
									</tr>
								</table>
							</div>
						</uib-accordion>
					</div>
					<!--End Logs Tabel History-->
				</uib-tab>
			</uib-tabset>
			<!--tabs End-->
		</div>
		<!--End tabs for Excel Upload-->
	</div>
</div>